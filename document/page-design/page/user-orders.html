<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>æˆ‘çš„è®¢å• - MovieTicket</title>
  <style>
    :root {
      --primary: #409EFF;
      --text: #24292f;
      --text-muted: #586069;
      --border: #e1e4e8;
      --bg-canvas: #f6f8fa;
      --bg-card: #ffffff;
      --sidebar-width: 280px;
      --status-waiting: #F5A623;   /* å¾…æ”¯ä»˜ */
      --status-success: #409EFF;   /* å·²å‡ºç¥¨ */
      --status-completed: #6a737d; /* å·²å®Œæˆ */
      --status-cancelled: #d73a49; /* å·²å–æ¶ˆ */
    }
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "PingFang SC", Helvetica, Arial, sans-serif;
    }
    body {
      background-color: var(--bg-canvas);
      color: var(--text);
      line-height: 1.5;
    }

    .profile-layout {
      display: flex;
      max-width: 1400px;
      margin: 0 auto;
      padding: 32px 40px;
      gap: 32px;
    }

    /* â€”â€”â€”â€”â€”â€” å·¦ä¾§æ  â€”â€”â€”â€”â€”â€” */
    .profile-sidebar {
      width: var(--sidebar-width);
      flex-shrink: 0;
    }
    .profile-card {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 6px;
      padding: 24px;
      margin-bottom: 24px;
    }
    .avatar-xl {
      width: 96px;
      height: 96px;
      border-radius: 50%;
      background: #f0f2f5;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 40px;
      color: #999;
      margin-bottom: 16px;
    }
    .profile-name {
      font-size: 24px;
      font-weight: 600;
      margin-bottom: 4px;
    }
    .profile-login {
      color: var(--text-muted);
      font-size: 14px;
      margin-bottom: 16px;
    }
    .menu-item {
      display: flex;
      align-items: center;
      padding: 8px 0;
      text-decoration: none;
      color: var(--text);
      font-size: 14px;
      font-weight: 500;
      gap: 8px;
    }
    .menu-item:hover,
    .menu-item.active {
      color: var(--primary);
    }
    .menu-item.active {
      position: relative;
    }
    .menu-item.active::before {
      content: "";
      position: absolute;
      left: -16px;
      width: 3px;
      height: 16px;
      background: var(--primary);
      border-radius: 2px;
    }
    .menu-item.logout-item {
      color: #6a737d;
      font-weight: normal;
    }
    .menu-item.logout-item:hover {
      color: #d73a49;
    }

    /* â€”â€”â€”â€”â€”â€” ä¸»å†…å®¹åŒº â€”â€”â€”â€”â€”â€” */
    .profile-main {
      flex: 1;
    }
    .breadcrumb {
      margin-bottom: 24px;
      font-size: 14px;
      color: var(--text-muted);
    }
    .breadcrumb a {
      color: var(--primary);
      text-decoration: none;
    }

    .section-card {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 6px;
      padding: 24px;
      margin-bottom: 24px;
    }
    .section-title {
      font-size: 20px;
      font-weight: 600;
      margin-bottom: 20px;
      padding-bottom: 12px;
      border-bottom: 1px solid var(--border);
    }

    /* è®¢å•é¡¹ */
    .order-item {
      padding: 16px 0;
      border-bottom: 1px solid var(--border);
    }
    .order-item:last-child {
      border-bottom: none;
    }
    .order-header {
      display: flex;
      justify-content: space-between;
      margin-bottom: 12px;
    }
    .order-movie-title {
      font-size: 18px;
      font-weight: 600;
    }
    .order-status {
      font-size: 12px;
      padding: 2px 8px;
      border-radius: 12px;
      color: white;
      font-weight: 500;
    }
    .status-waiting { background: var(--status-waiting); }
    .status-success { background: var(--status-success); }
    .status-completed { background: var(--status-completed); color: white; }
    .status-cancelled { background: var(--status-cancelled); }

    .order-details {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 12px;
      font-size: 14px;
      color: var(--text-muted);
      margin-bottom: 12px;
    }
    .detail-item strong {
      color: var(--text);
      margin-right: 6px;
    }

    .order-actions {
      display: flex;
      gap: 12px;
    }
    .btn {
      padding: 6px 12px;
      border-radius: 6px;
      font-size: 13px;
      cursor: pointer;
      text-decoration: none;
      display: inline-block;
      text-align: center;
    }
    .btn-outline {
      background: transparent;
      color: var(--primary);
      border: 1px solid var(--primary);
    }
    .btn-outline:hover {
      background: #f0f7ff;
    }

    /* ç©ºçŠ¶æ€ï¼ˆå½“å‰æœªå¯ç”¨ï¼‰ */
    .empty-state {
      text-align: center;
      padding: 48px 0;
      color: var(--text-muted);
    }
    .empty-state h3 {
      font-size: 18px;
      margin-bottom: 12px;
      color: var(--text);
    }
    .empty-state p {
      margin-bottom: 24px;
    }
    .btn-primary {
      background: var(--primary);
      color: white;
      border: 1px solid var(--primary);
      padding: 8px 16px;
      border-radius: 6px;
      text-decoration: none;
      display: inline-block;
    }
    .btn-primary:hover {
      background: #54a3ff;
    }

    /* åŠ è½½æ›´å¤š */
    .load-more {
      text-align: center;
      padding: 16px;
      color: var(--primary);
      cursor: pointer;
      font-size: 14px;
    }
    .load-more:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>
  <div class="profile-layout">
    <!-- å·¦ä¾§æ  -->
    <aside class="profile-sidebar">
      <div class="profile-card">
        <div class="avatar-xl">U</div>
        <div class="profile-name">å½±è¿·å°å¼ </div>
        <div class="profile-login">@movie_fan_123</div>
      </div>

      <div class="profile-card">
        <a href="user-profile.html" class="menu-item">ğŸ‘¤ ä¸ªäººèµ„æ–™</a>
        <a href="#" class="menu-item active">ğŸŸï¸ æˆ‘çš„è®¢å•</a>
        <a href="#" class="menu-item">ğŸ¬ è§‚å½±è®°å½•</a>
        <a href="#" class="menu-item">ğŸ« ä¼˜æƒ åˆ¸</a>
        <a href="#" class="menu-item">ğŸ”” æ¶ˆæ¯é€šçŸ¥</a>
        <a href="#" class="menu-item">âš™ï¸ è´¦æˆ·è®¾ç½®</a>
      </div>

      <div class="profile-card">
        <a href="login.html" class="menu-item logout-item">ğŸšª é€€å‡ºç™»å½•</a>
      </div>
    </aside>

    <!-- ä¸»å†…å®¹åŒºï¼ˆä»…ä¿ç•™ä¸€ä¸ªå®¹å™¨ï¼Œåˆå§‹æ— è®¢å•ï¼‰ -->
    <main class="profile-main">
    <div class="breadcrumb">
        <a href="user-home.html">é¦–é¡µ</a> / æˆ‘çš„è®¢å•
    </div>

    <div class="section-card">
        <h2 class="section-title">ğŸŸï¸ æˆ‘çš„è®¢å•</h2>
        <div id="ordersContainer">
        <!-- è®¢å•å°†é€šè¿‡ JS åŠ¨æ€æ’å…¥ -->
        </div>
        <div class="load-more" id="loadMoreBtn" style="display:none;">åŠ è½½æ›´å¤šè®¢å•...</div>
    </div>
    </main>
  </div>

  <!-- åŠ¨æ€åŠ è½½é€»è¾‘ -->
  <script>
    document.getElementById('loadMoreBtn').addEventListener('click', function () {
      const btn = this;
      btn.textContent = 'åŠ è½½ä¸­...';
      btn.style.pointerEvents = 'none';
      btn.style.opacity = '0.7';

      // æ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚å»¶è¿Ÿ
      setTimeout(() => {
        // æ–°è®¢å• HTML
        const newOrderHTML = `
          <div class="order-item">
            <div class="order-header">
              <div class="order-movie-title">ã€Šå¹´ä¼šä¸èƒ½åœï¼ã€‹</div>
              <span class="order-status status-completed">å·²å®Œæˆ</span>
            </div>
            <div class="order-details">
              <div class="detail-item"><strong>å½±é™¢ï¼š</strong>ç™¾è€æ±‡ç”µå½±ä¸­å¿ƒ</div>
              <div class="detail-item"><strong>åœºæ¬¡ï¼š</strong>2025-10-15 18:40</div>
              <div class="detail-item"><strong>åº§ä½ï¼š</strong>Aæ’08åº§</div>
              <div class="detail-item"><strong>é‡‘é¢ï¼š</strong>Â¥58.00</div>
            </div>
            <div class="order-actions">
              <a href="#" class="btn btn-outline">æŸ¥çœ‹è¯¦æƒ…</a>
            </div>
          </div>
        `;

        // æ’å…¥åˆ°æŒ‰é’®ä¹‹å‰
        const container = document.querySelector('.section-card');
        const range = document.createRange();
        range.selectNode(btn);
        const fragment = range.createContextualFragment(newOrderHTML);
        container.insertBefore(fragment, btn);

        // ç§»é™¤æŒ‰é’®ï¼ˆè¡¨ç¤ºå·²åŠ è½½å®Œæ¯•ï¼‰
        btn.remove();
      }, 800);
    });
  </script>

  <script>
  // æ¨¡æ‹Ÿåç«¯æ‰€æœ‰è®¢å•æ•°æ®ï¼ˆå®é™…é¡¹ç›®ä¸­ç”± API è¿”å›ï¼‰
  const allOrders = [
    {
      title: "ã€Šæ²™ä¸˜2ã€‹",
      status: "status-success",
      cinema: "UMEå½±åŸï¼ˆæœé˜³å¤§æ‚¦åŸåº—ï¼‰",
      time: "2025-12-05 19:30",
      seats: "Gæ’05åº§, Gæ’06åº§",
      price: "Â¥138.00"
    },
    {
      title: "ã€Šå¤´è„‘ç‰¹å·¥é˜Ÿ2ã€‹",
      status: "status-completed",
      cinema: "ä¸‡è¾¾å½±åŸï¼ˆè¥¿å•åº—ï¼‰",
      time: "2025-11-20 14:20",
      seats: "Dæ’10åº§",
      price: "Â¥69.00"
    },
    {
      title: "ã€Šå¼‚å½¢ï¼šå¤ºå‘½èˆ°ã€‹",
      status: "status-cancelled",
      cinema: "CGVå½±åŸï¼ˆä¸­å…³æ‘åº—ï¼‰",
      time: "2025-11-10 21:00",
      seats: "Fæ’03åº§",
      price: "Â¥75.00"
    },
    {
      title: "ã€Šå¹´ä¼šä¸èƒ½åœï¼ã€‹",
      status: "status-completed",
      cinema: "ç™¾è€æ±‡ç”µå½±ä¸­å¿ƒ",
      time: "2025-10-15 18:40",
      seats: "Aæ’08åº§",
      price: "Â¥58.00"
    },
    {
      title: "ã€Šå¥¥æœ¬æµ·é»˜ã€‹",
      status: "status-completed",
      cinema: "ä¸­å›½ç”µå½±èµ„æ–™é¦†",
      time: "2025-09-30 16:00",
      seats: "Bæ’12åº§",
      price: "Â¥80.00"
    },
    {
      title: "ã€Šèœ˜è››ä¾ ï¼šå¹³è¡Œå®‡å®™2ã€‹",
      status: "status-waiting",
      cinema: "è€€è±æˆé¾™å½±åŸï¼ˆäº”æ£µæ¾ï¼‰",
      time: "2025-12-10 20:15",
      seats: "Hæ’01åº§",
      price: "Â¥72.00"
    },
    {
      title: "ã€ŠèŠ­æ¯”ã€‹",
      status: "status-completed",
      cinema: "å½“ä»£MOMAç™¾è€æ±‡",
      time: "2025-08-22 19:00",
      seats: "Eæ’07åº§",
      price: "Â¥65.00"
    },
    {
      title: "ã€Šæµæµªåœ°çƒ3ã€‹ï¼ˆç‚¹æ˜ ï¼‰",
      status: "status-success",
      cinema: "IMAXæ¿€å…‰å…ï¼ˆåç†™LIVEï¼‰",
      time: "2025-12-20 21:30",
      seats: "Cæ’05åº§, Cæ’06åº§",
      price: "Â¥220.00"
    }
  ];

  let loadedCount = 0;
  const pageSize = 3; // æ¯æ¬¡åŠ è½½3æ¡
  const container = document.getElementById('ordersContainer');
  const loadMoreBtn = document.getElementById('loadMoreBtn');

  // æ¸²æŸ“è®¢å•é¡¹
  function renderOrder(order) {
    const statusText = {
      'status-waiting': 'å¾…æ”¯ä»˜',
      'status-success': 'å·²å‡ºç¥¨',
      'status-completed': 'å·²å®Œæˆ',
      'status-cancelled': 'å·²å–æ¶ˆ'
    }[order.status] || 'æœªçŸ¥';

    return `
      <div class="order-item">
        <div class="order-header">
          <div class="order-movie-title">${order.title}</div>
          <span class="order-status ${order.status}">${statusText}</span>
        </div>
        <div class="order-details">
          <div class="detail-item"><strong>å½±é™¢ï¼š</strong>${order.cinema}</div>
          <div class="detail-item"><strong>åœºæ¬¡ï¼š</strong>${order.time}</div>
          <div class="detail-item"><strong>åº§ä½ï¼š</strong>${order.seats}</div>
          <div class="detail-item"><strong>é‡‘é¢ï¼š</strong>${order.price}</div>
        </div>
        <div class="order-actions">
          <a href="#" class="btn btn-outline">æŸ¥çœ‹è¯¦æƒ…</a>
          ${order.status === 'status-success' || order.status === 'status-completed' 
            ? '<a href="#" class="btn btn-outline">å†æ¬¡è´­ç¥¨</a>' : ''}
        </div>
      </div>
    `;
  }

  // åŠ è½½ä¸‹ä¸€é¡µ
  function loadNextPage() {
    const fragment = document.createDocumentFragment();
    const start = loadedCount;
    const end = Math.min(start + pageSize, allOrders.length);

    for (let i = start; i < end; i++) {
      const div = document.createElement('div');
      div.innerHTML = renderOrder(allOrders[i]);
      fragment.appendChild(div.firstElementChild);
    }

    container.appendChild(fragment);
    loadedCount = end;

    // åˆ¤æ–­æ˜¯å¦è¿˜æœ‰æ›´å¤š
    if (loadedCount >= allOrders.length) {
      loadMoreBtn.style.display = 'none';
    }

    // æ¢å¤æŒ‰é’®çŠ¶æ€
    loadMoreBtn.textContent = 'åŠ è½½æ›´å¤šè®¢å•...';
    loadMoreBtn.style.pointerEvents = 'auto';
    loadMoreBtn.style.opacity = '1';
  }

  // ç‚¹å‡»åŠ è½½æ›´å¤š
  loadMoreBtn.addEventListener('click', function () {
    this.textContent = 'åŠ è½½ä¸­...';
    this.style.pointerEvents = 'none';
    this.style.opacity = '0.7';

    setTimeout(loadNextPage, 600);
  });

  // é¦–æ¬¡åŠ è½½
  if (allOrders.length === 0) {
    container.innerHTML = `
      <div class="empty-state">
        <h3>æš‚æ— è®¢å•</h3>
        <p>æ‚¨è¿˜æ²¡æœ‰è´­ä¹°è¿‡ç”µå½±ç¥¨ï¼Œå¿«å»æŒ‘é€‰ä¸€éƒ¨å¥½ç‰‡å§ï¼</p>
        <a href="user-home.html" class="btn-primary">å»é€‰ç”µå½±</a>
      </div>
    `;
  } else {
    loadNextPage(); // åŠ è½½ç¬¬ä¸€é¡µ
    if (allOrders.length > pageSize) {
      loadMoreBtn.style.display = 'block';
    }
  }
</script>
</body>
</html>